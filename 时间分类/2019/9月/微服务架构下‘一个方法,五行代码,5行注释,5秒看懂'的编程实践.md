# 编程闲谈之'一个方法,五行代码,五秒看懂'的编程实践

###### author:      朱##
###### createTime:  2019/9/12
###### endTime:     2019/9/12
###### notes:       我的代码都是艺术

正式工作至今, 不知不觉已过去2个月了, 在这两个月里,作为后端开发, 看见过一万多行代码的类, 也看见过一千多行代码的方法。

对于一个有着轻微代码洁癖的程序员来说, 丑陋的代码是最无法忍受的事情。本篇文章就最近与丑作战得到的一些微小技巧作一篇总结,并希望这些小技巧能够帮助到同样愿意与代码之丑作战的同学。

## 目录

* [类的分层实现](#类的分层实现)
* [方法的抽取,命名,修饰符](#方法层抽取,命名,修饰符)
* [使用异常替代return](#使用异常替代return)
* [分类](#分类)
* [Demo](#Demo)

## 类的分层实现

对于一个类,就阅读者层面来说, 阅读者想知道的信息无非是以下几点

#### 类里面有哪些方法

知道类里面有哪些方法, 才是方法的可复用的开始。

在阅读那个超10000行代码的类的时候, 我想的是, 如果开发人员在开发到涉及这个类的需求时, 即使他要写的方法,这个类里面有, 它应该也无法复用到这个方法, 一是找不到(10000行代码里找个方法,估计没人能找到...), 二是对于已经烂透了的代码,一般情况下是只会向着更烂演进。

就如美的东西,后续的拥有者会希望其更美,并愿意为这种更美费尽心思。而丑的东西,后续的拥有者更愿意选择的是眼不见为净,被发现了就说不是自己的。

#### 类方法的结构和细节

结构和细节,在程序世界中有很多与之相似的词语,比如public与private, 暴露与隐藏... 也有很多为其而生的词语, 比如抽象, 封装, 设计模式..., 还有很多对其评价的词语, 比如优美, 可读, 简单。 当然还有 丑陋, 晦涩, 复杂...。

好的代码, 隐藏其内部实现,但不隐藏其程序结构。

值得深思的是,就一个方法来说, 阅读者希望知道其多少程序结构?

在现实生活中, 对于一件事情, 人最容易理解的是两次执行流程, 即先###,再###, 如先结婚,后生子。先成家,后立业。 而考虑到因果关系, 人很多情况下对于3次执行流程的情况也是容易理解和记忆的, 即先###,再###,最后###。 如先追求,再谈恋爱,最后结婚或分手。

对于一个方法来说, 阅读者想知道的同样如此? 而考虑到程序和生活的严谨性区别, 生活中人们看到的只是普遍的情况, 但程序却需要考虑全面的情况。比如生活中,先追求,再谈恋爱,最后结婚或分手是对people的认知, 但对程序来说, 却没人规定程序输入一定是人, 说不定某天就有狗来问程序它能不能先追求,再谈恋爱,最后结婚或分手。这时候, 如果你是程序,多半是在最开头就叫他滚蛋了。 而与生活还有个不同就在于, 生活中, 结果是可以不确定的, 但对程序而言,却总是需要返回一个确定的结果。

以上事情在程序世界如下:

``` js
方法 无名方法():
    访问人校验()
    追求过程()
    恋爱过程()
    恋爱结束()
    返回 恋爱结果

方法 访问人校验():
    // 省略

方法 追求过程():
    // 省略

方法 恋爱过程():
    // 省略

方法 恋爱结束():
    // 省略
    获得 恋爱结果
```

以上3段流程, 再加上校验和返回, 也只是那么五行代码。即对于一个方法来说, 5行代码的程序逻辑是在可接受范围内最容易理解的(当然, 如果你的代码 使用先## 再## 就可以描述清楚, 那么4行代码也无刻厚非)。

### 使用异常代替return进行中途退出

程序世界和现实世界除了不同之处,其实也有很多相同之处, 比如 前面的例子, 正常的期望是两个人在恋爱结束后会修成正果(结婚)。而"分手" 则更应该算是正常情况之外的异常情况。 程序同样如此, 对于每个方法而言, 我们都希望这个方法能够正常执行我们希望他走的路程, 而中间出现了异常